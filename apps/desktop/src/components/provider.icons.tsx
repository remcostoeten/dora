import * as React from "react";

type TBase = Omit<React.SVGProps<SVGSVGElement>, 'color'>

type TProps = TBase & {
	size?: number | string
	color?: string
	title?: string
}

type TName = 'sqlite' | 'turso' | 'postgres' | 'postgresFill' | 'sql'

type TIcon = {
	sqlite: (p: TProps) => React.ReactElement
	turso: (p: TProps) => React.ReactElement
	postgres: (p: TProps) => React.ReactElement
	postgresFill: (p: TProps) => React.ReactElement
	sql: (p: TProps) => React.ReactElement
}

function cx(...v: Array<string | undefined | null | false>) {
	let out = ''
	for (let i = 0; i < v.length; i++) {
		const s = v[i]
		if (!s) continue
		out = out ? out + ' ' + s : s
	}
	return out
}

function toPx(v: number | string | undefined, fb: number) {
	if (v === undefined) return String(fb)
	return typeof v === 'number' ? String(v) : v
}

function baseSvg(p: TProps, fbTitle: string) {
	const { size, width, height, className, color, style, title, role, focusable, ...rest } = p

	const w = width ?? toPx(size, 24)
	const h = height ?? toPx(size, 24)

	return {
		w,
		h,
		cls: cx('inline-block align-middle', 'text-neutral-900 dark:text-neutral-100', className),
		sty: color ? { ...style, color } : style,
		ttl: title ?? fbTitle,
		role: role ?? 'img',
		focusable: focusable ?? false,
		rest
	}
}

export function Icon(p: TProps & { name: TName }) {
	const { name, ...rest } = p
	const Comp = icons[name]
	return <Comp {...rest} />
}

export function Sqlite(p: TProps) {
	const b = baseSvg(p, 'SQLite')
	return (
		<svg
			height={b.h}
			width={b.w}
			role={b.role}
			viewBox='0 0 24 24'
			xmlns='http://www.w3.org/2000/svg'
			className={b.cls}
			style={b.sty}
			focusable={b.focusable}
			fill='currentColor'
			{...b.rest}
		>
			<title>{b.ttl}</title>
			<path d='M21.678.521c-1.032-.92-2.28-.55-3.513.544a8.71 8.71 0 0 0-.547.535c-2.109 2.237-4.066 6.38-4.674 9.544.237.48.422 1.093.544 1.561a13.044 13.044 0 0 1 .164.703s-.019-.071-.096-.296l-.05-.146a1.689 1.689 0 0 0-.033-.08c-.138-.32-.518-.995-.686-1.289-.143.423-.27.818-.376 1.176.484.884.778 2.4.778 2.4s-.025-.099-.147-.442c-.107-.303-.644-1.244-.772-1.464-.217.804-.304 1.346-.226 1.478.152.256.296.698.422 1.186.286 1.1.485 2.44.485 2.44l.017.224a22.41 22.41 0 0 0 .056 2.748c.095 1.146.273 2.13.5 2.657l.155-.084c-.334-1.038-.47-2.399-.41-3.967.09-2.398.642-5.29 1.661-8.304 1.723-4.55 4.113-8.201 6.3-9.945-1.993 1.8-4.692 7.63-5.5 9.788-.904 2.416-1.545 4.684-1.931 6.857.666-2.037 2.821-2.912 2.821-2.912s1.057-1.304 2.292-3.166c-.74.169-1.955.458-2.362.629-.6.251-.762.337-.762.337s1.945-1.184 3.613-1.72C21.695 7.9 24.195 2.767 21.678.521m-18.573.543A1.842 1.842 0 0 0 1.27 2.9v16.608a1.84 1.84 0 0 0 1.835 1.834h9.418a22.953 22.953 0 0 1-.052-2.707c-.006-.062-.011-.141-.016-.2a27.01 27.01 0 0 0-.473-2.378c-.121-.47-.275-.898-.369-1.057-.116-.197-.098-.31-.097-.432 0-.12.015-.245.037-.386a9.98 9.98 0 0 1 .234-1.045l.217-.028c-.017-.035-.014-.065-.031-.097l-.041-.381a32.8 32.8 0 0 1 .382-1.194l.2-.019c-.008-.016-.01-.038-.018-.053l-.043-.316c.63-3.28 2.587-7.443 4.8-9.791.066-.069.133-.128.198-.194Z' />
		</svg>
	)
}

export function Turso(p: TProps) {
	const b = baseSvg(p, 'Turso')
	return (
		<svg
			height={b.h}
			width={b.w}
			role={b.role}
			viewBox='0 0 24 24'
			xmlns='http://www.w3.org/2000/svg'
			className={b.cls}
			style={b.sty}
			focusable={b.focusable}
			fill='currentColor'
			{...b.rest}
		>
			<title>{b.ttl}</title>
			<path d='m23.31.803-.563-.42-1.11 1.189-.891-1.286-.512.235.704 1.798-.326.35L18.082 0l-.574.284 2.25 4.836-2.108.741h-.05l-1.143-1.359-1.144 1.36H8.687l-1.144-1.36-1.146 1.363H6.36l-2.12-.745L6.491.284 5.919 0l-2.53 2.668-.327-.349.705-1.798-.512-.236-.89 1.287L1.253.382.69.804 2.42 3.69l-.89.939.311 2.375 2.061.787L3.9 8.817H1.947v.444l.755 1.078 1.197.433v6.971l3.057 4.55L7.657 24l1.101-1.606L9.9 24l.999-1.606L12 24l1.102-1.606L14.1 24l1.141-1.606L16.343 24l.701-1.706 3.058-4.55v-6.972l1.196-.433.756-1.078v-.444h-1.952l.003-1.03 2.054-.784.311-2.375-.89-.939zm-8.93 18.718H8.033l.793-1.615.794 1.615.793-1.083.793 1.083.794-1.083.793 1.083.794-1.083.793 1.083.793-1.615.794 1.615zm3.886-7.39-3.3 1.084-.143 3.061-2.827.627-2.826-.627-.142-3.06-3.3-1.085v-1.635l4.266 1.21-.052 4.126h4.109l-.052-4.127 4.266-1.209z' />
		</svg>
	)
}

export function Postgres(p: TProps) {
	const b = baseSvg(p, 'Postgres')
	return (
		<svg
			height={b.h}
			width={b.w}
			role={b.role}
			viewBox='0 0 24 24'
			xmlns='http://www.w3.org/2000/svg'
			className={b.cls}
			style={b.sty}
			focusable={b.focusable}
			fill='none'
			{...b.rest}
		>
			<title>{b.ttl}</title>
			<path
				d='m23.31.803-.563-.42-1.11 1.189-.891-1.286-.512.235.704 1.798-.326.35L18.082 0l-.574.284 2.25 4.836-2.108.741h-.05l-1.143-1.359-1.144 1.36H8.687l-1.144-1.36-1.146 1.363H6.36l-2.12-.745L6.491.284 5.919 0l-2.53 2.668-.327-.349.705-1.798-.512-.236-.89 1.287L1.253.382.69.804 2.42 3.69l-.89.939.311 2.375 2.061.787L3.9 8.817H1.947v.444l.755 1.078 1.197.433v6.971l3.057 4.55L7.657 24l1.101-1.606L9.9 24l.999-1.606L12 24l1.102-1.606L14.1 24l1.141-1.606L16.343 24l.701-1.706 3.058-4.55v-6.972l1.196-.433.756-1.078v-.444h-1.952l.003-1.03 2.054-.784.311-2.375-.89-.939zm-8.93 18.718H8.033l.793-1.615.794 1.615.793-1.083.793 1.083.794-1.083.793 1.083.794-1.083.793 1.083.793-1.615.794 1.615zm3.886-7.39-3.3 1.084-.143 3.061-2.827.627-2.826-.627-.142-3.06-3.3-1.085v-1.635l4.266 1.21-.052 4.126h4.109l-.052-4.127 4.266-1.209z'
				stroke='currentColor'
				strokeWidth='1.6'
				strokeLinejoin='round'
			/>
		</svg>
	)
}

export function PostgresFill(p: TProps) {
	const b = baseSvg(p, 'Postgres')
	return (
		<svg
			height={b.h}
			width={b.w}
			role={b.role}
			viewBox='0 0 24 24'
			xmlns='http://www.w3.org/2000/svg'
			className={b.cls}
			style={b.sty}
			focusable={b.focusable}
			fill='none'
			{...b.rest}
		>
			<title>{b.ttl}</title>
			<path
				d='M16.2385 2C15.4614 2.00578 14.6888 2.11879 13.9426 2.33584L13.8901 2.3525C13.4195 2.26933 12.943 2.22335 12.4651 2.215C11.4835 2.19834 10.6401 2.43667 9.96011 2.83334C9.29011 2.60084 7.90009 2.2 6.43508 2.28C5.41507 2.33584 4.30174 2.64584 3.47673 3.51668C2.65422 4.38752 2.21922 5.73503 2.31089 7.56839C2.33589 8.07421 2.48006 8.89922 2.71922 9.96757C2.95839 11.0359 3.29423 12.2867 3.7134 13.4276C4.13257 14.5693 4.59174 15.5943 5.30926 16.291C5.66757 16.6401 6.16092 16.9335 6.74258 16.9093C7.15093 16.8926 7.52009 16.7135 7.83844 16.4493C7.99344 16.6535 8.15928 16.7426 8.3101 16.8251C8.5001 16.9293 8.6851 17.0001 8.87679 17.0468C9.22095 17.1326 9.81011 17.2476 10.5001 17.1301C10.7351 17.091 10.9826 17.0143 11.2293 16.9051C11.2385 17.1801 11.2493 17.4493 11.2601 17.7218C11.2943 18.5851 11.316 19.3827 11.5751 20.0818C11.6168 20.196 11.731 20.7843 12.181 21.3035C12.631 21.8235 13.5126 22.1477 14.5168 21.9327C15.2252 21.781 16.126 21.5077 16.7244 20.656C17.316 19.8143 17.5827 18.6068 17.6352 16.6485C17.6485 16.5426 17.6644 16.4526 17.681 16.3685L17.8219 16.381H17.8385C18.5944 16.4151 19.4144 16.3076 20.0994 15.9893C20.7061 15.7085 21.1652 15.4243 21.4994 14.9201C21.5827 14.7951 21.6744 14.6443 21.6994 14.3843C21.7244 14.1243 21.5752 13.7176 21.3277 13.5301C20.8319 13.1534 20.5202 13.2968 20.186 13.3659C19.8569 13.4387 19.5214 13.4794 19.1844 13.4876C20.1477 11.8651 20.8386 10.1417 21.2327 8.61672C21.4661 7.71671 21.5969 6.8867 21.6077 6.16088C21.6186 5.43503 21.5594 4.79253 21.1244 4.23669C19.7652 2.5 17.8544 2.02 16.376 2.00333C16.3302 2.0025 16.2844 2.00167 16.2385 2.0025V2Z'
				fill='currentColor'
			/>
		</svg>
	)
}

export function Sql(p: TProps) {
	const b = baseSvg(p, 'SQL')
	return (
		<svg
			height={b.h}
			width={b.w}
			role={b.role}
			viewBox='0 0 256 256'
			xmlns='http://www.w3.org/2000/svg'
			className={b.cls}
			style={b.sty}
			focusable={b.focusable}
			fill='currentColor'
			{...b.rest}
		>
			<title>{b.ttl}</title>
			<path d='M208,88H152V32Z' opacity='0.2' />
			<path d='M48,120a8,8,0,0,0,8-8V40h88V88a8,8,0,0,0,8,8h48v16a8,8,0,0,0,16,0V88a8,8,0,0,0-2.34-5.66l-56-56A8,8,0,0,0,152,24H56A16,16,0,0,0,40,40v72A8,8,0,0,0,48,120ZM160,51.31,188.69,80H160ZM228,208a8,8,0,0,1-8,8H192a8,8,0,0,1-8-8V152a8,8,0,0,1,16,0v48h20A8,8,0,0,1,228,208ZM91.82,196.31a20.82,20.82,0,0,1-9.19,15.23C77.44,215,71,216,65.14,216A60.72,60.72,0,0,1,50,214a8,8,0,0,1,4.3-15.41c4.38,1.2,14.95,2.7,19.55-.36.89-.59,1.83-1.52,2.14-3.93.35-2.67-.71-4.1-12.78-7.59-9.35-2.7-25-7.23-23-23.11a20.55,20.55,0,0,1,9-14.95c11.84-8,30.72-3.31,32.83-2.76a8,8,0,0,1-4.08,15.48c-4.49-1.17-15.22-2.56-19.82.56a4.54,4.54,0,0,0-2,3.67c-.12.9-.14,1.08,1.12,1.9,2.31,1.49,6.44,2.68,10.45,3.84C77.5,174.17,94.06,179,91.82,196.31Zm71,3.23A39.05,39.05,0,0,0,168,180c0-19.85-14.35-36-32-36s-32,16.15-32,36,14.35,36,32,36a29.18,29.18,0,0,0,15.9-4.78l2.44,2.44a8,8,0,0,0,11.31-11.32ZM136,200c-8.82,0-16-9-16-20s7.18-20,16-20,16,9,16,20a24.41,24.41,0,0,1-1.18,7.51l-1.17-1.17a8,8,0,1,0-11.31,11.32l1.68,1.67A12.93,12.93,0,0,1,136,200Z' />
		</svg>
	)
}

export const icons: TIcon = {
	sqlite: Sqlite,
	turso: Turso,
	postgres: Postgres,
	postgresFill: PostgresFill,
	sql: Sql
}

export type { TProps as TIconProps, TName as TIconName }
