# Dora App Audit (2026-02-20)

## Scope

Audit target: desktop application under `apps/desktop` (React + Tauri), plus top-level project docs.

## Validation Runs

- `bun run test:desktop` -> pass (`11` files, `115` tests).
- `bun run --cwd apps/desktop build` -> pass (with chunk-size/code-splitting warnings).
- `cargo check --manifest-path apps/desktop/src-tauri/Cargo.toml` -> pass (warnings only).
- `bun x tsc --noEmit -p apps/desktop/tsconfig.app.json` -> fail (many TypeScript errors).

## Findings

1. **High: Frontend type safety gate is currently broken.**
- `apps/desktop/src/components/ui/sonner.tsx:6` uses `ToasterProps` without defining/importing it.
- `apps/desktop/src/core/data-generation/schema-analyzer.ts:11` uses `faker.internet.userName`, which is invalid for current faker typings.
- `apps/desktop/src/features/database-studio/database-studio.tsx:1490` passes props (`pagination`, `onPaginationChange`, etc.) that are not in `StudioToolbar` props.
- Additional failures are spread across adapter/result typing (`result.error` access without narrowing), missing imports, and stale type usage in multiple modules.
- Impact: strict TypeScript build/release gates are blocked until corrected.

2. **High: Runtime analytics is enabled while docs previously implied fully offline/private behavior.**
- `apps/desktop/src/App.tsx:14` imports `@vercel/analytics/react`.
- `apps/desktop/src/App.tsx:32` renders `<Analytics />` globally.
- Impact: privacy/telemetry messaging must stay aligned with actual runtime behavior.

3. **Medium: Several user-facing features are intentionally incomplete but still appear in the product surface.**
- MySQL entry is present but disabled: `apps/desktop/src/features/connections/components/connection-dialog/database-type-selector.tsx:20`.
- SSH tunnel control in connection form is disabled and marked “Soon”: `apps/desktop/src/features/connections/components/connection-dialog/connection-form.tsx:280`.
- SQL Console filter action currently shows “Coming Soon”: `apps/desktop/src/features/sql-console/sql-console.tsx:663`.
- Docker Manager is grouped under “coming soon” items but is clickable/usable: `apps/desktop/src/features/app-sidebar/navigation-sidebar.tsx:142` and `apps/desktop/src/features/app-sidebar/navigation-sidebar.tsx:157`.
- Impact: capability discoverability and docs/UI consistency drift.

4. **Medium: Bundle size is large for core client chunks.**
- Build output reports multi-megabyte bundles (`index` and editor/vendor chunks) and Vite chunk warnings.
- Impact: startup/load performance risk and larger distribution artifacts.

5. **Low: Rust backend compiles cleanly but emits warning debt.**
- Warnings include lifetime syntax in vendored `libsql-sys` and dead-code/unfulfilled lint expectations in app modules.
- Impact: not release-blocking, but adds maintenance noise.

## Recommended Next Actions

1. Make `bun x tsc --noEmit -p apps/desktop/tsconfig.app.json` green, then enforce it in CI.
2. Decide telemetry policy explicitly (keep/remove) and keep docs + UI copy aligned.
3. Move incomplete items to a clear “Planned” section in UI and docs, or hide unavailable actions.
4. Split/editor-code chunks more aggressively and lazy-load heavy Monaco paths.
5. Triage and fix Rust warnings after the TypeScript gate is restored.
